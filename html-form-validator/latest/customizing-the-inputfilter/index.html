<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Customizing the InputFilter &ndash; xtreamwayz</title><link rel=stylesheet href=https://xtreamwayz.github.io/style/main.min.e68ac7a811d09f37100ab49d4cae9b4dc41ec716acb138b92d3ed5b0aa4d73fa840196f4f208ce56ab15ea972d579f1494e96ae19f4967eac2feb16c90e24edc.css integrity="sha512-5orHqBHQnzcQCrSdTK6bTcQexxassTi5LT7VsKpNc/qEAZb08gjOVqsV6pctV58UlOlq4Z9JZ+rC/rFskOJO3A==" media=screen></head><body class=app><header class="app-header navbar navbar-expand navbar-dark bg-dark text-white"><nav class="nav-container container"><a class="navbar-brand text-primary text-uppercase font-weight-bold" href=https://xtreamwayz.github.io/ aria-label="It starts with an idea">xtreamwayz</a><ul class="navbar-nav mr-auto"><li class="nav-item dropdown"><a class="nav-item nav-link dropdown-toggle mr-md-2" href=# id=bd-projects data-toggle=dropdown aria-haspopup=true aria-expanded=false>html-form-validator</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=bd-projects><a class=dropdown-item href=https://xtreamwayz.github.io/psr-container-messenger/>psr-container-messenger</a>
<a class=dropdown-item href=https://xtreamwayz.github.io/html-form-validator/>html-form-validator</a>
<a class=dropdown-item href=https://xtreamwayz.github.io/mezzio-console/>mezzio-console</a></div></li><div class=dropdown><a class="nav-item nav-link mr-md-2 dropdown-toggle" href=# role=button id=header-html-form-validator-v1 data-toggle=dropdown aria-haspopup=true aria-expanded=false>Version v1</a><div class=dropdown-menu aria-labelledby=header-html-form-validator-v1><a class=dropdown-item href=https://xtreamwayz.github.io/html-form-validator/latest/>Latest (v1)</a></div></div></ul></nav></header><main class=app-content><article class=container><header><h1>Customizing the InputFilter</h1></header><div class=d-flex><div class=flex-grow-1><nav id=TableOfContents><ul><li><a href=#setting-a-default-inputfilter-factory>Setting a default InputFilter Factory</a></li><li><a href=#re-usable-inputfilters>Re-usable InputFilters</a></li><li><a href=#custom-validators-and-filters>Custom Validators and Filters</a></li></ul></nav></div><nav class="nav flex-column nav-pills mb-4"><a class="nav-link btn btn-sm btn-primary m-1" href=https://github.com/xtreamwayz/html-form-validator>Source</a>
<a class="nav-link btn btn-sm btn-primary m-1" href="https://github.com/xtreamwayz/html-form-validator/issues/new?template=bug-report.md&title=docs:%20issue%20with%20html-form-validator%2flatest%2fcustomizing-the-inputfilter.md">Report issue</a></nav></div><h2 id=setting-a-default-inputfilter-factory>Setting a default InputFilter Factory</h2><p>Sometimes you need custom filters or validators. To register those, a <code>Laminas\InputFilter\Factory</code> can be used and
injected into the FormFactory. Or use the included <code>InputFilterFactory</code> to set this up for you from this config:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-php data-lang=php>return = [
    &#39;laminas-inputfilter&#39; =&gt; [
        &#39;validators&#39; =&gt; [
            // Attach custom validators or override standard validators
            &#39;invokables&#39; =&gt; [
                &#39;recaptcha&#39; =&gt; RecaptchaValidator::class,
            ],
        ],
        &#39;filters&#39;    =&gt; [
            // Attach custom filters or override standard filters
            &#39;invokables&#39; =&gt; [],
        ],
    ],
];
</code></pre></td></tr></table></div></div><h2 id=re-usable-inputfilters>Re-usable InputFilters</h2><p>Still want to use a html form instead of generating it with complicated classes, but you want to reuse the validation
part? We got you covered. The <code>FormFactory</code> and <code>Form</code> accepts <code>Laminas\InputFilter\InputFilterInterface</code>s so they can be
re-used everywhere in your app. The <code>Form</code> only creates new filters and validators for named input elements that do not
exist yet in the injected InputFilter.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-php data-lang=php>$form = (new FormFactory())-&gt;fromHtml($htmlForm, $defaultValues, $userInputFilter);
</code></pre></td></tr></table></div></div><h2 id=custom-validators-and-filters>Custom Validators and Filters</h2><p>Setting up custom validators and filters is a bit more work but it isn&rsquo;t complicated. Instead of creating the
FormFactory with its static <code>fromHtml</code> method, the constructor is needed with a configured <code>Laminas\InputFilter\Factory</code>
and a <code>Psr\Container\ContainerInterface</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-php data-lang=php>$config = [
    &#39;laminas-inputfilter&#39; =&gt; [
        &#39;validators&#39; =&gt; [
            // Attach custom validators or override standard validators
            &#39;invokables&#39; =&gt; [
                &#39;recaptcha&#39; =&gt; Xtreamwayz\HTMLFormValidator\Validator\RecaptchaValidator::class,
            ],
        ],
        &#39;filters&#39;    =&gt; [
            // Attach custom filters or override standard filters
            &#39;invokables&#39; =&gt; [
            ],
        ],
    ],
];

// Create a container-interop compatible container with the custom validator configuration
$container = new Laminas\ServiceManager\ServiceManager($dependencies);
$container-&gt;setService(&#39;config&#39;, $config);

// Use the InputFilterFactory to do all the work for you
$factory = new Xtreamwayz\HTMLFormValidator\InputFilterFactory();
$inputFilterFactory = $factory($container);

// Load the html form into the FormFactory
$formFactory = new FormFactory($inputFilterFactory);

// Create a form instance
$form = $formFactory-&gt;fromHtml($html);

// Validate the form
$result = $form-&gt;validate($_POST);

// Display the plain form
echo $form-&gt;asString();

// Display the form with the submitted values and validation messages
echo $form-&gt;asString($validationResult);
</code></pre></td></tr></table></div></div><footer class="my-5 text-muted">This page, including the code samples, is licensed under the <a href=https://creativecommons.org/licenses/by/4.0/>Creative Commons CC BY 4.0</a> license.</footer></article></main><footer class="app-footer p-3"><div class=container><p class=text-center>&copy; 2016-2020 <a href=https://geerteltink.github.io/>Geert Eltink</a></p></div></footer><script src=https://code.jquery.com/jquery-3.5.1.slim.min.js integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js integrity=sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-151173516-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>